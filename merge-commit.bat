@echo off
chcp 65001 >nul
echo ========================================
echo Объединение коммита a9dc649
echo ========================================
echo.

echo [1/3] Сохранение локальных изменений...
git stash push -m "Локальные изменения перед merge a9dc649"
if errorlevel 1 (
    echo ПРЕДУПРЕЖДЕНИЕ: Не удалось сохранить изменения в stash
    echo Возможно, нет изменений для сохранения
)

echo.
echo [2/3] Объединение коммита a9dc649...
git merge a9dc649
if errorlevel 1 (
    echo ОШИБКА: Не удалось выполнить merge
    echo Восстановление локальных изменений...
    git stash pop
    pause
    exit /b 1
)

echo.
echo [3/3] Восстановление локальных изменений...
git stash pop
if errorlevel 1 (
    echo ПРЕДУПРЕЖДЕНИЕ: Не удалось восстановить изменения из stash
    echo Возможно, stash был пуст или произошел конфликт
    echo Проверьте статус: git status
)

echo.
echo ========================================
echo Готово! Коммит объединен
echo ========================================
echo.
echo Проверка статуса:
git status
echo.
pause
