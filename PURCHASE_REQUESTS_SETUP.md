# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ "–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∫—É–ø–∫—É"

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:

1. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `BuyNowModal.jsx` —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫ –≤ `BuyNowModal.css`
3. ‚úÖ –°–æ–∑–¥–∞–Ω SQL —Ñ–∞–π–ª `server/database/create_purchase_requests.sql`
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã `purchaseRequestQueries` –≤ `server/database/database.js`
5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –≤ `server/server.js`
6. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã API endpoints –≤ `server/server.js`:
   - POST `/api/purchase-requests` - —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å
   - GET `/api/purchase-requests` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
   - GET `/api/purchase-requests/:id` - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ ID
   - GET `/api/purchase-requests/buyer/:buyerId` - –∑–∞–ø—Ä–æ—Å—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
   - PUT `/api/purchase-requests/:id/status` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
   - DELETE `/api/purchase-requests/:id` - —É–¥–∞–ª–∏—Ç—å –∑–∞–ø—Ä–æ—Å

## ‚ö†Ô∏è –û—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é:

### –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Ç–∞–±–ª–∏—Ü—ã –≤ `server/database/database.js`

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `server/database/database.js` –∏ –Ω–∞–π–¥–∏—Ç–µ –±–ª–æ–∫ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 405):

```javascript
      } catch (whatsappError) {
        console.warn('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É WhatsApp –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', whatsappError.message);
      }
    } catch (migrationError) {
```

**–î–û–ë–ê–í–¨–¢–ï** –º–µ–∂–¥—É —ç—Ç–∏–º–∏ –±–ª–æ–∫–∞–º–∏ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

```javascript
      } catch (whatsappError) {
        console.warn('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É WhatsApp –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', whatsappError.message);
      }

      // –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–∫—É–ø–∫—É, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
      try {
        const purchaseRequestsTable = db.prepare("SELECT name FROM sqlite_master WHERE type='table' AND name='purchase_requests'").get();
        if (!purchaseRequestsTable) {
          console.log('üîÑ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–∫—É–ø–∫—É...');
          const purchaseRequestsSql = readFileSync(join(__dirname, 'create_purchase_requests.sql'), 'utf8');
          db.exec(purchaseRequestsSql);
          console.log('‚úÖ –¢–∞–±–ª–∏—Ü–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–∫—É–ø–∫—É —Å–æ–∑–¥–∞–Ω–∞');
        }
      } catch (purchaseRequestsError) {
        console.warn('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–∫—É–ø–∫—É:', purchaseRequestsError.message);
      }
    } catch (migrationError) {
```

## üöÄ –ó–∞–ø—É—Å–∫

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞:

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
2. –¢–∞–±–ª–∏—Ü–∞ `purchase_requests` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞:

–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∫—É–ø–∫—É –≤–∫–ª—é—á–∞–µ—Ç:

### –î–∞–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è:
- `buyer_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `buyer_name` - –ò–º—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è ‚úÖ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- `buyer_email` - Email –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- `buyer_phone` - –¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–∫—É–ø–∞—Ç–µ–ª—è

### –î–∞–Ω–Ω—ã–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏:
- `property_id` - ID –æ–±—ä–µ–∫—Ç–∞
- `property_title` - –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ ‚úÖ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- `property_price` - –¶–µ–Ω–∞
- `property_currency` - –í–∞–ª—é—Ç–∞ (USD/EUR/BYN)
- `property_location` - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- `property_type` - –¢–∏–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
- `property_area` - –ü–ª–æ—â–∞–¥—å

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:
- `request_date` - –î–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞
- `status` - –°—Ç–∞—Ç—É—Å (pending/processing/completed/cancelled)
- `admin_notes` - –ó–∞–º–µ—Ç–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `created_at` - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ:

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
const response = await fetch('/api/purchase-requests');

// –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "pending"
const response = await fetch('/api/purchase-requests?status=pending');

// –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–ø—Ä–æ—Å–∞
await fetch('/api/purchase-requests/123/status', {
  method: 'PUT',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    status: 'processing',
    adminNotes: '–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∑–∞–ª—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º'
  })
});
```

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∫—É–ø–∫—É" –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ:
1. –°–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–∑ Clerk –∏–ª–∏ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã)
2. –°–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –æ–± –æ–±—ä–µ–∫—Ç–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/purchase-requests`
4. –ó–∞–ø—Ä–æ—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
6. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ –∞–¥–º–∏–Ω–∫–µ
